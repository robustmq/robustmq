/* VitePress布局修复 - 专门解决位置错乱问题 */

/* 1. 修复CSS变量冲突 */
:root {
  --vp-offset: 0px !important;
  --vp-nav-height: 64px !important;
}

/* 2. 强制覆盖动态计算的样式 */
[style*="--vp-offset"] {
  --vp-offset: 0px !important;
}

/* 3. 禁用可能导致布局跳动的变换 - 仅针对首页 */
.VPContent.is-home,
.VPHome {
  --vp-offset: 0px !important;
  transform: none !important;
  will-change: auto !important;
}

/* 文档页面保持正常的布局计算 */
.VPDoc .VPContent {
  /* 保持默认的VitePress布局 */
}

/* 4. 修复水合不匹配导致的布局问题 */
.VPContent * {
  animation-duration: 0.3s !important;
  animation-delay: 0s !important;
  transition-duration: 0.3s !important;
}

/* 5. 确保容器不会溢出 - 仅针对首页 */
.VPHome .VPContent {
  overflow-x: hidden;
  max-width: 100vw;
}

/* 6. 修复响应式布局 - 仅针对首页 */
@media (max-width: 768px) {
  .VPHome .VPContent {
    --vp-offset: 0px !important;
    transform: none !important;
  }
}

/* 7. 修复主题切换时的布局问题 - 仅针对首页 */
html.dark .VPHome .VPContent,
html:not(.dark) .VPHome .VPContent {
  --vp-offset: 0px !important;
  transform: none !important;
}

/* 8. 修复导航栏位置 */
.VPNav {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 1000 !important;
}

/* 9. 确保内容区域正确定位 - 仅针对首页 */
.VPHome .VPContent {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* 10. 修复侧边栏可能导致的布局问题 */
.VPSidebar {
  transform: none !important;
  transition: transform 0.3s ease !important;
}

/* 11. 防止布局闪烁 */
* {
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000;
  perspective: 1000;
}
