# RobustMQ Admin Server HTTP API é€šç”¨æŒ‡å—

## æ¦‚è¿°

RobustMQ Admin Server æ˜¯ HTTP ç®¡ç†æ¥å£æœåŠ¡ï¼Œæä¾›å¯¹ RobustMQ é›†ç¾¤çš„å…¨é¢ç®¡ç†åŠŸèƒ½ã€‚

- **åŸºç¡€åœ°å€**: `http://localhost:8080`
- **API å‰ç¼€**: `/api` (æ‰€æœ‰ç®¡ç†æ¥å£éƒ½ä½¿ç”¨æ­¤å‰ç¼€)
- **è¯·æ±‚æ–¹æ³•**: ä¸»è¦ä½¿ç”¨ `POST` æ–¹æ³•
- **æ•°æ®æ ¼å¼**: JSON
- **å“åº”æ ¼å¼**: JSON

## API æ–‡æ¡£å¯¼èˆª

- ğŸ“‹ **[é›†ç¾¤ç®¡ç† API](CLUSTER.md)** - é›†ç¾¤é…ç½®å’ŒçŠ¶æ€ç®¡ç†
- ğŸ”§ **[MQTT Broker API](MQTT.md)** - MQTT ä»£ç†ç›¸å…³çš„æ‰€æœ‰ç®¡ç†æ¥å£

---

## é€šç”¨å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "code": 0,
  "message": "success",
  "data": {...}
}
```

### é”™è¯¯å“åº”
```json
{
  "code": 500,
  "message": "error message",
  "data": null
}
```

### åˆ†é¡µå“åº”æ ¼å¼
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "data": [...],
    "total_count": 100
  }
}
```

---

## é€šç”¨è¯·æ±‚å‚æ•°

å¤§å¤šæ•°åˆ—è¡¨æŸ¥è¯¢æ¥å£æ”¯æŒä»¥ä¸‹é€šç”¨å‚æ•°ï¼š

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `limit` | `u32` | å¦ | æ¯é¡µå¤§å°ï¼Œé»˜è®¤ 10000 |
| `page` | `u32` | å¦ | é¡µç ï¼Œä»1å¼€å§‹ï¼Œé»˜è®¤ 1 |
| `sort_field` | `string` | å¦ | æ’åºå­—æ®µ |
| `sort_by` | `string` | å¦ | æ’åºæ–¹å¼ï¼šasc/desc |
| `filter_field` | `string` | å¦ | è¿‡æ»¤å­—æ®µ |
| `filter_values` | `array` | å¦ | è¿‡æ»¤å€¼åˆ—è¡¨ |
| `exact_match` | `string` | å¦ | ç²¾ç¡®åŒ¹é…ï¼štrue/false |

### åˆ†é¡µå‚æ•°ç¤ºä¾‹
```json
{
  "limit": 20,
  "page": 1,
  "sort_field": "create_time",
  "sort_by": "desc",
  "filter_field": "status",
  "filter_values": ["active"],
  "exact_match": "false"
}
```

---

## åŸºç¡€æ¥å£

### æœåŠ¡çŠ¶æ€æŸ¥è¯¢
- **æ¥å£**: `GET /api/status`
- **æè¿°**: è·å–æœåŠ¡çŠ¶æ€å’Œç‰ˆæœ¬ä¿¡æ¯
- **è¯·æ±‚å‚æ•°**: æ— 
- **å“åº”ç¤ºä¾‹**:
```json
"RobustMQ API v0.1.34"
```

### æœåŠ¡ç‰ˆæœ¬æŸ¥è¯¢
- **æ¥å£**: `GET /`
- **æè¿°**: è·å–æœåŠ¡ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå‘åå…¼å®¹æ¥å£ï¼‰
- **è¯·æ±‚å‚æ•°**: æ— 
- **å“åº”ç¤ºä¾‹**:
```json
"RobustMQ API v0.1.34"
```

---

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 0 | è¯·æ±‚æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 403 | ç¦æ­¢è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬è¯·æ±‚ç¤ºä¾‹
```bash
# è·å–æœåŠ¡ç‰ˆæœ¬
curl -X GET http://localhost:8080/

# å¸¦åˆ†é¡µçš„åˆ—è¡¨æŸ¥è¯¢
curl -X POST http://localhost:8080/api/mqtt/user/list \
  -H "Content-Type: application/json" \
  -d '{
    "limit": 10,
    "page": 1,
    "sort_field": "username",
    "sort_by": "asc"
  }'
```

### é”™è¯¯å¤„ç†ç¤ºä¾‹
```bash
# å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œä¼šè¿”å›é”™è¯¯ä¿¡æ¯
{
  "code": 400,
  "message": "Invalid parameter: username is required",
  "data": null
}
```

---

## æ³¨æ„äº‹é¡¹

1. **è¯·æ±‚æ–¹æ³•**: é™¤äº†æ ¹è·¯å¾„ `/` ä½¿ç”¨ GET æ–¹æ³•å¤–ï¼Œæ‰€æœ‰å…¶ä»–æ¥å£éƒ½ä½¿ç”¨ POST æ–¹æ³•
2. **è¯·æ±‚ä½“**: å³ä½¿æ˜¯æŸ¥è¯¢æ“ä½œï¼Œä¹Ÿéœ€è¦å‘é€ JSON æ ¼å¼çš„è¯·æ±‚ä½“
3. **æ—¶é—´æ ¼å¼**: 
   - è¾“å…¥æ—¶é—´ä½¿ç”¨ Unix æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
   - è¾“å‡ºæ—¶é—´ä½¿ç”¨æœ¬åœ°æ—¶é—´æ ¼å¼å­—ç¬¦ä¸² "YYYY-MM-DD HH:MM:SS"
4. **åˆ†é¡µ**: é¡µç  `page` ä» 1 å¼€å§‹è®¡æ•°
5. **é…ç½®éªŒè¯**: åˆ›å»ºèµ„æºæ—¶ä¼šéªŒè¯é…ç½®æ ¼å¼çš„æ­£ç¡®æ€§
6. **æƒé™æ§åˆ¶**: å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ·»åŠ é€‚å½“çš„è®¤è¯å’Œæˆæƒæœºåˆ¶
7. **é”™è¯¯å¤„ç†**: æ‰€æœ‰é”™è¯¯éƒ½ä¼šè¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•
8. **å†…å®¹ç±»å‹**: è¯·æ±‚å¿…é¡»è®¾ç½® `Content-Type: application/json` å¤´éƒ¨

---

## å¼€å‘å’Œè°ƒè¯•

### å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨ admin-server
cargo run --bin admin-server

# æˆ–è€…ä½¿ç”¨å·²ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
./target/release/admin-server
```

### æµ‹è¯•è¿æ¥
```bash
# æµ‹è¯•æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
curl -X GET http://localhost:8080/
```

### æ—¥å¿—æŸ¥çœ‹
æœåŠ¡è¿è¡Œæ—¶ä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- è¯·æ±‚è·¯å¾„å’Œå‚æ•°
- å“åº”çŠ¶æ€å’Œæ•°æ®
- é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª

---

*æ–‡æ¡£ç‰ˆæœ¬: v4.0*  
*æœ€åæ›´æ–°: 2025-09-20*  
*åŸºäºä»£ç ç‰ˆæœ¬: RobustMQ Admin Server v0.1.34*
