# 04: RobustMQ 整体架构概述

> RobustMQ 是基于 Rust 构建的新一代高性能多协议消息队列。愿景是成为新一代云原生与 AI 原生消息基础设施。它不是简单的"又一个消息队列"，而是面向AI时代和云原生需求，对消息队列进行的一次重新思考和设计。

在[《RobustMQ: 技术设计理念综述》](02.md)中讲述了RobustMQ 的核心技术思想。它有六个特点：高性能、Serverless、插件式存储、极简高内聚架构、 计算/存储/调度分离、多协议。本文我们将会详细讲解 RobustMQ 整体架构的设计实现。

在[《介绍 RobustMQ 的 Roles》](./03.md) 中我们知道了节点Role的概念。接下来我们将会详细介绍一下RobustMQ的整体架构。

### 架构概述
RobustMQ 整体由 Meta Service、Broker Server、Storage Adapter、Journal Server四部分组成。
- Meta Service：元数据和调度层，负责集群的元数据存储和调度。主要完成:
  - Broker 和 Journal 集群相关的元数据(Topic、Group、Queue、Partition 等)存储、分发。
  - Broker 和 Journal 集群的控制、调度，比如集群节点的上下线、配置存储/分发等。
- Broker Server：消息队列逻辑处理层，负责不同消息队列协议的解析和逻辑处理。主要完成：
  - 解析MQTT、Kafka、AMQP、RocketMQ 等协议的解析
  - 整合、抽象不同协议通用的逻辑, 处理不同协议的不同消息队列逻辑。以兼容适配不同的消息队列。
- Storage Adapter：存储适配层，存储适配层会将多种 MQ 协议中的 Topic/Queue/Partition 统一抽象为 Shard。同时适配不同的底层存储引擎（比如本地文件存储、远程的HDFS、对象存储、自研的存储组件等等），从而实现存储适配层的插件化、可插拔。
- Journal Server：是内置的本地多副本、分段式、持久存储服务。它可以类比为 Bookeeper 对于Pulsar。Kafka Segment 对于 Kafka 。它目标是构建一个高性能、高吞吐、高可靠的持久化存储引擎，类似Bookeeper。它是为了解决高内聚的特性，让 RobustMQ 可以在不依赖任何外部组件的情况下提供高性能、高可靠的服务。


### 详细架构
先来看下图：
![image](../../images/robustmq-architecture.png)

如上图所示，这是一个由三个节点组成的 RobustMQ 集群。