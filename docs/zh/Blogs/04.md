# 04: 聊聊 RobustMQ 在产品层面的思考

> RobustMQ 是基于 Rust 构建的新一代高性能多协议消息队列。愿景是成为新一代云原生与 AI 原生消息基础设施。它不是简单的"又一个消息队列"，而是面向AI时代和云原生需求，对消息队列进行的一次重新思考和设计。

从开始写 RobustMQ 的第一天开始，我们就一直在思考自己有没有陷入在技术思维茧房，在做一件没有实际业务需求的事情，是不是在技术自嗨。而在 RobustMQ 的这两年里，我们也受到了很多质疑。觉得我们“在造一个新的轮子”，“又一个消息队列”，”消息队列太成熟了，没有增量，这个领域一点都不性感“，“我们的设想太宏大了，太难了”。

我们知道，如果方向错了，再努力都没用，所以本文我们想从产品思维的角度来聊一聊我们的思考。

### 产品定位

RobustMQ 是一个标准的消息队列，也只是消息队列。产品定位上它和RocketMQ、Kafka、Pulsar、RabbitMQ 是一样的。在未来的某一天，我们希望社区中谈到消息队列演进的时候可以是：RabbitMQ -> Kafka -> RocketMQ -> Pulsar -> RobustMQ。因此来说，RobustMQ 的产品定位是很清晰的。就是一个消息队列。

我们认为在未来某一天，如果你需要消息队列，你的选项清单里面就必定会有RobustMQ。那为什么你会选它呢？

对我们来说，我们希望你的选 RobustMQ 的理由会是：
1. 它很快、很稳定、性能很高。也就是它会有很高的QPS/吞吐，稳定的耗时表现。能满足比如流、消息、金融等等各种场景下对耗时和吞吐的需求。
2. 它可以兼容多种多种标准协议，MQTT/AMQP/Kafka/RocketMQ等等。当你在使用当前这些消息队列产品遇到问题且需要进行重新选型时，不会因为业务改动大而放弃它。因为RobustMQ 将会兼容这些协议和对齐功能。让业务侧的改动成本为0。
3. 它的插件式存储架构，可以满足完全满足业务中不同场景耗时、成本的需求。比如同一个集群中对耗时要求高的场景可以使用本地存储，数据量大且需要控制成本的可以使用远程对象存储等等。
4. 只需要一套消息队列，就可以满足公司内的各种场景，不需要再维护多套消息队列了。统一且轻松。
5. 它具备完整的弹性扩缩容能力，完美适配K8s架构，适合波峰波谷明显的场景。能明显降低成本。

也就是说，从产品视角来看，RobustMQ 希望作为现有消息队列产品的平替而出现的。是多款的平替，而不只是一款。可以平替的原因是因为RobustMQ 更稳定、性能表现更好，足够弹性，能满足更多场景、迁移成本低。

RobustMQ 从写下第一行代码开始，就坚持开源优先的原则，它的目标始终是成为Apache 顶级项目。但是此刻，我们希望从商业化视角来看看RobustMQ 是否有价值？ 也就是想从商业化视角，看一下RobustMQ 是否有存在的意义。

### 商业化视角

从商业化视角看 RobustMQ 其实很简单。我们只需要回答一个问题就可以：当完成我们所有的技术设想后，RobustMQ 作为一个消息队列，如果你把它拿去卖，能卖的出去吗？它的受众是谁，这些受众会认可它的价值吗？

今天，我们的答案肯定是有的。先来看看我们认为的它的受众是谁。我们认为有两类：大型云厂商、独立企业。

- 大型云厂商

在现有大型云厂商（特别是国内）的实际运营中，售卖的消息队列产品大都是开源产品的托管，比如托管Kafka、托管RabbitMQ、托管RocketMQ等等，通过托管不同的产品来满足从自建上云，已经在使用某款消息队列产品的平替需求。对云厂商来说，托管开源产品的好处很多（比如只需托管，开发成本低，产品稳定，能快速带来收入等等）。但是从长期运营来看，开源托管很难做出（和其他云厂商、用户自建）差异性优势，很容易沦落为卖资源（Cpu/内存）。

因此云产商为了在功能、性能、成本上有优势，会在开源上进行二次开发，而二次开发则会遇到下面两个问题：
1. 每个开源托管都要二次开发。每个云产品都要投入，投入成本大，无法形成合力。从而就会思考，能不能只有一款消息队列，在这款消息队列上去适配多种协议，这样技术投入可形成合力，也更容易做出差异性。从而在成本、性能上做出差异性优势。
   
2. 而二次开发，从长期来看会和社区分叉，无法用到社区优势，很难长期坚持，还是得回归社区。导致投入了大量人力，还是回到原点，无法做出差异性优势。

而 RobustMQ 恰好可以满足这个场景，它的弹性设计、插件化存储、多协议、开源这四个特性，刚好可以完美解决上述两个问题。

想象个场景，如果robustMQ 完成了它设想中的多协议、serverless、插件化存储等特性，那么对云厂商来说，它拿到RobustMQ后，就可以在它的基础上，适配自己云上的合适的存储引擎，通过参与开源社区优化内核，就可以满足不同场景、方向的消息队列需求。对云厂商的价值来说，只需要一套内核，长期人力、运维投入的成本都会成倍下降。而这个场景，在我们看来不是臆想，是有实际价值的。

- 独立企业

如果是小型企业，在业务场景不复杂的情况下，使用哪种消息队列产品都差不多。而当企业的规模变大，业务场景变复杂后。一般需要多种消息队列。此时不管是业务方选型使用、基础架构团队维护多种消息队列的成本都是非常高的。在很多企业，为了提升业务的稳定性、降低运维成本、降低人才储备成本，都会限制只选用一款或两款消息队列。

此时，如果有一款能够适配多协议，性能和稳定性、弹性、能面向多种场景的消息队列的话。是完美符合这类型企业的诉求的。此时即降低了使用、运维成本，业务迁移成本也很低。此时，我们认为RobustMQ 对企业也是有价值的。

### 我们设想中 RobustMQ 适合的两种场景
1. 云厂商/大型企业的一个MQ需求：需要一款All In One 的消息队列来当作消息底座来满足各种不同场景，降低长期开发、韵味成本的。
2. MQTT/Kafka等产品平替需求：在性能、弹性、成本等方面对当前产品不满意的，有平替需求的。比如对 Kafka 的弹性/成本有需求的，对当前MQTT Broker 实现有更高性能需求的。就可以使用RobustMQ 来替代当前的实现。

### 总结
所以从产品角度来看，在当前阶段我们会认为 RobustMQ 是有价值的的一件事。也就是它不是“又一个消息队列而已”。

基础软件是一段漫长的旅途，我们始终认为，拥抱开源、拥抱热爱、拥抱坚持才能做好。我们始终在摸索、调整的路上。希望在未来的某一天，我们会有一个答案：RobustMQ 真是一件有价值的事。
