## Storage Offset 存储设计

从设计上看，RobustMQ 的消息数据将存储在不同的存储介质中，此时在数据订阅消费时，就会存在一个共性需求： Offset 怎么存储。比如数据存到对象存储、HDFS 等文件型存储时，Offset 怎么存储。以后甚至有更多的存储引擎的话，Offset 怎么存储。为了解决这个问题，必须设计一个通用的Offset 存储方案。简化插件化存储层的开发工作量。

我们的实现是：将Offset 数据统一存储在Meta Service中。因为Meta Service 是一个基于Raft和RocksDB 协议的分布式KV存储引擎。从一致性、功能上俩看，用它来存储Offset 数据将是一个合适的选择。但是因为Offset 更新是一个极高频次的数据，且Meta Service 是RobustMQ 集群的元数据存储引擎和控制中心。所以有两个问题就需要解决：
1. Offset 高频次的读写不能影响Metada的读写和集群管控相关功能。
2. Meta Service 能承担Offset高频次的读写。

总结来看，就是如何做好隔离和提高读写性能。


## 整体架构


## 隔离性

## 读写性能提升